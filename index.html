<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MissÃ£o FÃ©rias | PREMIUM âœ¨</title>
    <!-- Montserrat Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Courier+New&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <canvas id="confetti-canvas"></canvas>

    <!-- Login Screen -->
    <div id="login-screen" class="login-container">
        <div class="login-box">
            <h1>MissÃ£o FÃ©rias â¤ï¸</h1>
            <p>Sua jornada de amor e cuidado comeÃ§a aqui.</p>
            <button id="login-btn" class="google-btn">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google Logo">
                Entrar com Google
            </button>
        </div>
    </div>

    <!-- App Layout (Hidden until login) -->
    <div id="app-container" class="app-layout hidden">
        
        <!-- Sidebar Toggle Button (Floating) -->
        <button id="sidebar-toggle" class="sidebar-toggle-btn" title="Menu">
            â¤ï¸
        </button>

        <!-- Sidebar Navigation -->
        <aside id="main-sidebar" class="app-sidebar collapsed">
            <div class="sidebar-header">
                <h2>MissÃ£o FÃ©rias</h2>
                <button id="close-sidebar-btn" class="icon-btn-small">âœ–ï¸</button>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" onclick="window.navigateTo('home')">
                    <span class="icon">ğŸ </span> PÃ¡gina Principal
                </button>
                <button class="nav-item" onclick="window.navigateTo('memories')">
                    <span class="icon">ğŸ“¸</span> Nossas MemÃ³rias
                </button>
                <button class="nav-item" onclick="window.navigateTo('rules')">
                    <span class="icon">ğŸ“œ</span> Regras
                </button>
            </nav>
            <div class="sidebar-footer">
                <button id="logout-btn" class="nav-item">
                    <span class="icon">ğŸšª</span> Sair
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="app-content">
            
            <!-- View: Home (Mission Grid) -->
            <section id="view-home" class="view-section active">
                <header class="top-header">
                    <div class="header-left">
                        <div id="day-wrapper">
                            <h2 id="day-header">Dia 1 de 10</h2>
                        </div>
                        <div class="stats-bar">
                            <span id="completed-count">0</span> / <span id="total-count">0</span> CONCLUÃDAS â€¢ <span id="points-counter">0</span> PTS
                        </div>
                    </div>
                    <div class="header-actions">
                        <button id="next-day-btn" class="action-btn" title="PrÃ³ximo Dia" style="display: none;">â¡ï¸</button>
                    </div>
                </header>

                <div class="progress-wrapper">
                    <div id="progress-bar" class="progress-fill"></div>
                </div>

                <div id="mission-grid" class="bento-grid">
                    <!-- Missions rendered by JS -->
                </div>

                <footer>
                    <p class="footer-phrase">"Cada pequena coisa que vocÃª faz me deixa mais orgulhoso de vocÃª. Aproveite seu momento! â¤ï¸"</p>
                    <p id="daily-quote">"Preparando algo especial..."</p>
                </footer>
            </section>

            <!-- View: Memories (Gallery) -->
            <section id="view-memories" class="view-section hidden">
                <header class="view-header">
                    <h2>Galeria de MemÃ³rias ğŸ“¸</h2>
                    <p>Todos os momentos especiais que vocÃª registrou.</p>
                </header>
                <div id="memories-grid" class="memories-grid">
                    <!-- Memories rendered JS -->
                    <p class="empty-state">Ainda nÃ£o hÃ¡ memÃ³rias. Complete missÃµes com fotos para encher este Ã¡lbum! â¤ï¸</p>
                </div>
            </section>

            <!-- View: Rules -->
            <section id="view-rules" class="view-section hidden">
                <header class="view-header">
                    <h2>Como Funciona ğŸ“œ</h2>
                </header>
                <div class="rules-content">
                    <div class="rule-card">
                        <h3>1. O Objetivo ğŸ¯</h3>
                        <p>Completar 10 dias de missÃµes de autocuidado e amor. Dedique um tempo para vocÃª mesma todos os dias.</p>
                    </div>
                    <div class="rule-card">
                        <h3>2. PontuaÃ§Ã£o ğŸ†</h3>
                        <ul>
                            <li><strong>100 Pts:</strong> MissÃ£o feita no turno certo + FOTO ğŸ“¸</li>
                            <li><strong>50 Pts:</strong> MissÃ£o feita no turno certo (Sem foto)</li>
                            <li><strong>50 Pts:</strong> MissÃ£o feita fora do turno + FOTO ğŸ“¸</li>
                            <li><strong>25 Pts:</strong> MissÃ£o feita fora do turno (Sem foto)</li>
                        </ul>
                    </div>
                    <div class="rule-card">
                        <h3>3. Fotos & MemÃ³rias ğŸ–¼ï¸</h3>
                        <p>As fotos que vocÃª tira sÃ£o salvas na aba "Nossas MemÃ³rias". Ã‰ o nosso Ã¡lbum particular!</p>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Modals -->
    <div id="mission-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div id="modal-body">
                <!-- Content injected by JS -->
            </div>
        </div>
    </div>

    <!-- Milestone 5: Halfway -->
    <div id="milestone-5" class="milestone-overlay hidden">
        <div class="milestone-content">
            <h1 class="milestone-title">5 Dias de Saudades e Muito Amor! â¤ï¸</h1>
            <p class="milestone-msg">
                Olha sÃ³ onde chegamos, meu amor! Metade do caminho jÃ¡ foi. <br>
                Cada missÃ£o que vocÃª fez me deixou mais orgulhoso da mulher incrÃ­vel que vocÃª Ã©. <br>
                Falta pouco para estarmos juntos novamente! âœ¨
            </p>
            <div class="emoji-rain-container"></div>
            <button class="btn-primary" onclick="closeMilestone(5)">
                Continuar para o Dia 6 âœ¨
            </button>
        </div>
    </div>

    <!-- Milestone 10: Reunion -->
    <div id="milestone-10" class="milestone-overlay hidden premium-overlay">
        <div class="parallax-bg"></div>
        <div class="milestone-content premium-content">
            <h1 class="milestone-title">VOCÃŠ CONSEGUIU! ğŸ‰</h1>
            <h2 class="milestone-subtitle">A PrÃ³xima MissÃ£o Ã© o Nosso AbraÃ§o! ğŸ‘©â€â¤ï¸â€ğŸ‘¨</h2>
            
            <p class="milestone-msg">
                Foram 10 dias, 60 missÃµes e um milhÃ£o de sorrisos. <br>
                VocÃª completou cada desafio com todo carinho, e agora a contagem regressiva chegou ao fim. <br>
                O seu prÃªmio nÃ£o cabe em um site: sou eu chegando para te amar! â¤ï¸
            </p>

            <!-- Memory Carousel -->
            <div class="memory-carousel-wrapper">
                <h3>Sua Jornada InesquecÃ­vel ğŸ‘‡</h3>
                <div id="final-carousel" class="memory-carousel">
                    <!-- Photos injected by JS -->
                </div>
            </div>

            <button class="btn-primary gold-btn" onclick="closeMilestone(10)">
                â¤ï¸ Correr para o AbraÃ§o â¤ï¸
            </button>
        </div>
    </div>

    <div id="polaroid-modal" class="modal-overlay">
        <div class="polaroid-content">
            <button class="close-polaroid">âœ–ï¸</button>
            <div class="polaroid-frame">
                <img id="polaroid-img" src="" alt="MemÃ³ria">
                <p id="polaroid-caption">Legenda</p>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading-overlay" class="hidden">
        <div class="heart-spinner"></div>
    </div>

    <!-- Import Map for Firebase -->
    <script type="importmap">
    {
        "imports": {
            "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js",
            "firebase/analytics": "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js",
            "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js",
            "firebase/storage": "https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js"
        }
    }
    </script>
    <script type="module" src="script.js"></script>
</body>
</html>
